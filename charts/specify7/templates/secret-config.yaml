apiVersion: v1
kind: Secret
metadata:
  name: {{ include "specify7.fullname" . }}-config
  labels:
    {{- include "specify7.labels" . | nindent 4 }}
type: Opaque
stringData:
  local_specify_settings.py: |
    # Generated by Helm
    import os
    
    # Generated by Helm
    DATABASE_NAME = os.environ.get('DATABASE_NAME', '{{ .Values.specify.database.name }}')
    {{- if .Values.mariadb.enabled }}
    DATABASE_HOST = '{{ .Release.Name }}-mariadb'
    {{- else }}
    DATABASE_HOST = os.environ.get('DATABASE_HOST', '{{ .Values.specify.database.host }}')
    {{- end }}
    DATABASE_PORT = int(os.environ.get('DATABASE_PORT', {{ .Values.specify.database.port }}))
    
    MASTER_NAME = os.environ.get('MASTER_NAME', '{{ .Values.specify.user.masterName }}')
    MASTER_PASSWORD = os.environ.get('MASTER_PASSWORD', '{{ .Values.specify.user.masterPassword }}')
    
    # Specify uses the same user for app access usually? Or separate? 
    # Standard charts often reuse master creds for simplicity or have separate app user.
    # We'll map APP_USER to the same env vars or defaults for now.
    APP_USER_NAME = os.environ.get('APP_USER_NAME', '{{ .Values.specify.user.masterName }}')
    APP_USER_PASSWORD = os.environ.get('APP_USER_PASSWORD', '{{ .Values.specify.user.masterPassword }}')
    
    SECRET_KEY = os.environ.get('SECRET_KEY', '{{ .Values.specify.secretKey }}')
    WEB_ATTACHMENT_KEY = os.environ.get('WEB_ATTACHMENT_KEY', '{{ .Values.specify.assetServerKey }}')
    
    DEBUG = {{ .Values.specify.debug | ternary "True" "False" }}
    
    # Static files location (matches Nginx & InitContainer paths)
    STATIC_ROOT = '/volumes/static-files'
